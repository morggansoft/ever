<div class="brand-dark search-products">
	<ion-searchbar
		[(ngModel)]="searchInput"
		mode="ios"
		color="light"
		placeholder="Product or a shop name"
		animated
		debounce="500"
		(ionChange)="loadFullData()"
	></ion-searchbar>

	<ion-list class="brand-dark">
		<div class="products-container">
			<h5
				*ngIf="
					searchResultProducts.length === 0 &&
					searchResultMerchants.length === 0
				"
				class="not-found-text p-3"
			>
				Empty List
			</h5>

			<ion-item
				color="medium"
				*ngFor="let merchant of searchResultMerchants"
				lines="none"
				class="m-2"
			>
				<ion-avatar slot="start">
					<img [src]="merchant.logo" />
				</ion-avatar>
				<ion-label>{{ merchant.name }} </ion-label>
			</ion-item>

			<div class="center" *ngIf="searchResultMerchants.length">
				<ion-button
					color="tertiary"
					size="small"
					(click)="loadMoreMerchants()"
					>View More</ion-button
				>
			</div>

			<ion-card *ngFor="let productInfo of searchResultProducts">
				<ion-row
					class="product-container"
					(click)="goToDetailsPage(productInfo)"
				>
					<ion-col class="col-3 image-container">
						<img [src]="getProductImage(productInfo)" />
					</ion-col>
					<ion-col class="col-9" class="col-9 info-container">
						<ion-row>
							<ion-col>
								<span class="product-title">
									{{
										localeTranslate(
											productInfo.warehouseProduct
												.product['title']
										)
									}}
								</span>
							</ion-col>
							<ion-col class="col-3 price">
								<ion-badge color="primary"
									>{{
										productInfo.warehouseProduct.price
									}}
									$</ion-badge
								>
							</ion-col>
						</ion-row>
						<ion-row>
							<span class="product-description">
								{{
									shortenDescription(
										localeTranslate(
											productInfo.warehouseProduct
												.product['description']
										)
									)
								}}
							</span>
						</ion-row>
					</ion-col>
				</ion-row>
			</ion-card>

			<div class="center" *ngIf="searchResultProducts.length">
				<ion-button
					color="tertiary"
					size="small"
					(click)="loadMoreProducts()"
					>View More</ion-button
				>
			</div>
		</div>
	</ion-list>
</div>
